<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Добро пожаловать, #{user.name}!</title>
    <link href="css/default.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript">
        function openSearchResult() {
            searchByNameDlg.hide();
            searchByIdDlg.hide();
            displayFoundByName.show()
        }

        function reload() {
            location.reload();
        }

    </script>

</h:head>

<h:body onload="#{clientform.refreshTabs()}" styleClass="body_style">


<p:layout id="basePageLayout" fullPage="true">
<p:layoutUnit position="north" id="topMenu" size="50">
    <ui:include src="clientform/mainmenu.xhtml"/>
</p:layoutUnit>
<p:layoutUnit position="center" resizable="true" collapsible="true">
<p:tabView effect="fade" effectDuration="normal" id="m_tabview" style="#{clientform.mainPanelVisibility}" styleClass="topLayoutMainForm" scrollable="false">
<p:ajax event="tabChange" listener="#{clientform.tabChangeListener}" update="base_form documents_form contracts_form shelter_form"/>
<p:tab title="Базовая информация">
    <!-- *** Basic Client Form *** -->

    <h:form id="base_form">

        <p:growl id="growl" showDetail="true" life="5000"/>
        <p:layout id="base_client" style="min-width:400px;min-height:750px;" styleClass="topLayoutMainForm">
            <p:layoutUnit position="north" size="5" header="#{clientform.header}" style="min-height:26px" styleClass="topLayoutMainForm" id="header"/>
            <p:layoutUnit position="west" size="210" style="max-height:300px;" header="Фотография">
                <p:imageSwitch id="photo_main_avatar" effect="scrollRight">
                    <ui:repeat value="photoCamBean.photos" var="photo_main_avatar_var">
                        <p:commandLink actionListener="#{clientform.openPhotoDlg}">
                            <p:graphicImage id="main_avatar" value="#{clientform.clientFormAvatar}" cache="false" styleClass="avatar_block1"/>
                        </p:commandLink>
                    </ui:repeat>
                </p:imageSwitch>
                <p:menu styleClass="avatar_block2">
                    <p:menuitem value="Камера" actionListener="#{photoCamBean.showDlg()}" ajax="true" icon="ui-icon-star"/>
                    <p:menuitem value="Загрузить" actionListener="#{photoCamBean.showOpenDlg()}" ajax="true" icon="ui-icon-disk"/>
                    <p:menuitem value="Удалить" actionListener="#{photoCamBean.deletePhoto()}" ajax="true" icon="ui-icon-close"/>
                </p:menu>
            </p:layoutUnit>
            <p:layoutUnit position="center" style="max-height:300px;" header="Персональная информация">
                <ui:include src="clientform/maininfo.xhtml"/>
            </p:layoutUnit>
            <p:layoutUnit position="east" size="500" style="max-height:300px;" header="Оказанные услуги">
                <ui:include src="clientform/providedservices.xhtml"/>
            </p:layoutUnit>
            <p:layoutUnit position="south" size="200" styleClass="bottomLayoutMainForm">

                <p:layout styleClass="photoOperationButtons">
                    <p:layoutUnit position="west" size="350" header="Дополнительная информация">
                        <ui:include src="clientform/personalinfo.xhtml"/>
                    </p:layoutUnit>
                    <p:layoutUnit position="center" styleClass="bottomLayoutMainForm">
                        <p:layout>
                            <p:layoutUnit position="west" size="33%" header="Причины бездомности">
                                <ui:include src="clientform/homelessreasons.xhtml"/>
                            </p:layoutUnit>
                            <p:layoutUnit position="center" size="33%" header="Источники существования">
                                <ui:include src="clientform/breadwinner.xhtml"/>
                            </p:layoutUnit>
                            <p:layoutUnit position="east" size="33%" header="Хронические болезни">
                                <ui:include src="clientform/chronicaldisasters.xhtml"/>
                            </p:layoutUnit>
                        </p:layout>
                    </p:layoutUnit>
                    <p:layoutUnit position="south" size="100" style="min-height: 45px; max-height: 45px" styleClass="bottomLayoutMainForm">
                        <center>
                            <p:commandButton value="Сохранить" actionListener="#{clientform.saveClientForm(clientform)}" id="saveClientForm" update="@this :m_tabview:base_form base_form_panel_grid growl"
                                             icon="ui-icon-check"/>
                        </center>
                    </p:layoutUnit>

                </p:layout>


            </p:layoutUnit>


        </p:layout>

        <!--

-->
    </h:form>
    <!-- *** End Of Basic Client Form *** -->
    <!--





-->

</p:tab>
<p:tab title="Документы">
    <!-- *** Client Documents Form *** -->
    <ui:include src="clientform/documents.xhtml"/>
</p:tab>
<p:tab title="Социальное сопровождение">
    <ui:include src="clientform/contracts.xhtml"/>
    <ui:include src="clientform/shelters.xhtml"/>


</p:tab>
<p:tab id="contactsTab" title="#{clientform.contactsHeaderInline}">
    <h:form id="client_contacts">
        <p:panel id="add_contacts_panel_grid">
            <p:editor id="contacts_editor" value="#{clientform.contacts}"/>
            <p:growl id="growl_client_contacts" showDetail="true" life="3000"/>
            <center>
                <p:commandButton value="Сохранить" actionListener="#{clientform.saveClientForm(clientform)}" id="saveClientFormContacts"
                                 update="@this :m_tabview add_contacts_panel_grid growl_client_contacts" icon="ui-icon-check"/>
            </center>
        </p:panel>
    </h:form>
</p:tab>
<p:tab id="commentsTab" title="#{clientform.commentsHeaderInline}">
    <h:form id="client_memo">
        <p:panel id="add_memo_panel_grid">
            <p:editor id="memo_editor" value="#{clientform.memo}"/>
            <p:growl id="growl_client_memo" showDetail="true" life="3000"/>
            <center>
                <p:commandButton value="Сохранить" actionListener="#{clientform.saveClientForm(clientform)}" id="saveClientFormComments" update="@this :m_tabview add_memo_panel_grid growl_client_memo"
                                 icon="ui-icon-check"/>
            </center>
        </p:panel>
    </h:form>

</p:tab>
<p:tab title="Построить документ">
    <p:commandButton value="Стандартный документ" actionListener="#{customDocument.openDlg()}" icon="ui-icon-circle-plus"/>
    <p:commandButton value="Запрос в ЗАГС" actionListener="#{zagsrequest.openDlg()}" icon="ui-icon-circle-plus"/>
</p:tab>
<p:tab title="Выдать справку">

    <h:form id="documentsMenu">

    <p:menu styleClass="documentsMenuCss">
        <p:submenu label="Выберите тип справки">
            <p:menuitem value="Справка о регистрации" onclick="regDocumentSelectWv.show()" icon="ui-icon-circle-plus" />
            <p:menuitem value="Направление в диспансер" actionListener="#{basicdocument.openDlg('dispensaryDocumentWv.show()')}" icon="ui-icon-circle-plus"/>

            <p:menuitem value="Справка о социальной помощи" actionListener="#{basicdocument.openDlg('sochelpDocumentWv.show()')}" icon="ui-icon-circle-plus"/>
            <p:menuitem value="Направление на санобработку" actionListener="#{basicdocument.openDlg('sanDocumentWv.show()')}" icon="ui-icon-circle-plus"/>
            <p:menuitem value="Справка для проезда" actionListener="#{basicdocument.openDlg('travelDocumentWv.show()')}" icon="ui-icon-circle-plus"/>
            <p:menuitem value="Транзит" actionListener="#{basicdocument.openDlg('tranzitDocumentWv.show()')}" icon="ui-icon-circle-plus"/>
        </p:submenu>
    </p:menu>
        <p:separator />
    </h:form>

</p:tab>
<p:tab title="Удалить клиента">
</p:tab>

</p:tabView>

</p:layoutUnit>
<p:layoutUnit id="right" position="east" size="300" resizable="true" closable="true" collapsible="true" header="Reminders" minSize="200" collapsed="true">
    Schedule
</p:layoutUnit>


</p:layout>

<p:panel id="base_panel" widgetVar="base_panelWv" style="#{clientform.mainPanelVisibility}">
</p:panel>
<!-- Include Dialogs -->
<ui:include src="dialogs/search.xhtml"/>
<ui:include src="dialogs/webcamera.xhtml"/>
<ui:include src="dialogs/addservices.xhtml"/>
<ui:include src="dialogs/adddocument.xhtml"/>
<ui:include src="dialogs/addcontract.xhtml"/>
<ui:include src="dialogs/addshelter.xhtml"/>
<ui:include src="dialogs/editcontract.xhtml"/>
<ui:include src="dialogs/mysettings.xhtml"/>
<ui:include src="dialogs/roomsettings.xhtml"/>
<ui:include src="dialogs/editroom.xhtml"/>
<ui:include src="dialogs/addserviceplanitem.xhtml"/>
<ui:include src="dialogs/realphoto.xhtml"/>
<ui:include src="dialogs/photoupload.xhtml"/>
<ui:include src="dialogs/customDocument.xhtml"/>
<ui:include src="dialogs/zagsRequest.xhtml"/>
<ui:include src="dialogs/regdocument.xhtml"/>
<ui:include src="dialogs/basicdocument.xhtml"/>


<p:dialog id="notImplementedDlg" header="Этот раздел еще не имплементирован" widgetVar="notImplementedDlgWv" resizable="false" closable="true" modal="true" showEffect="fade" hideEffect="explode" closeOnEscape="true">
    <p:panel>
        <p:outputLabel value="Этот раздел находится в разработке"/>
    </p:panel>
</p:dialog>


</h:body>

</html>