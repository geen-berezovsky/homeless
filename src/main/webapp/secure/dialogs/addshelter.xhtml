<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">
<ui:composition>
    <p:messages/>

    <p:dialog id="addShelter" header="Измените информацию о проживании" widgetVar="addShelterWv" resizable="false"
              closable="true" modal="true" showEffect="fade"
              hideEffect="explode" dynamic="true" closeOnEscape="true" onShow="shelterOnShow()">
        <h:form id="add_shelter">
            <h:panelGrid columns="2" id="add_shelters_panel_grid">
                <p:row>
                    <p:outputLabel value="Клиент:" styleClass="base_form_caption_text"/>
                </p:row>
                <p:row>
                    <p:outputLabel
                            value="#{clientform.surname} #{clientform.firstname} #{clientform.middlename}" styleClass="base_form_value_text"/>
                </p:row>
                <p:row>
                    <p:outputLabel value="Дата заселения:"
                                   validator="#{clientcontracts.validateStartDateFormat}" required="true"
                                   requiredMessage="Обязательно к заполнению" styleClass="base_form_caption_text"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="startNewShelterDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.inShelter}"
                                id="startNewShelterDateCal" showOn="button" pattern="dd.MM.yyyy" styleClass="base_form_value_text"/>
                </p:row>

                <p:row>
                    <p:outputLabel value="Дата выселения:"
                                   validator="#{clientshelter.validateStopDateFormat}" required="true"
                                   requiredMessage="Обязательно к заполнению" styleClass="base_form_caption_text"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="stopNewShelterDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.outShelter}" id="stopNewShelterDateCal"
                                showOn="button" pattern="dd.MM.yyyy" styleClass="base_form_value_text"/>
                </p:row>


                <p:row>
                    <p:outputLabel value="Комната:" styleClass="base_form_caption_text"/>
                </p:row>
                <p:row>
                    <p:selectOneMenu id="shRoomId" value="#{clientshelter.selectedShelter.roomId}" style="width:185px;" styleClass="base_form_value_text">
                        <f:selectItems itemLabel="#{roomVal.roomnumber}  (занято #{roomVal.currentnumoflivers} из #{roomVal.roommaxlivers})" value="#{clientshelter.rooms}" var="roomVal" itemValue="#{roomVal.id}" />
                    </p:selectOneMenu>
                </p:row>
                <p:row>
                    <p:outputLabel value="Дата проведения флюорографии:" styleClass="base_form_caption_text"
                                   validator="#{clientshelter.validateVaccinationDateFormat}"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="fluDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.fluorogr}" id="fluDateCal"
                                showOn="button" pattern="dd.MM.yyyy" styleClass="base_form_value_text"/>
                </p:row>
                <p:row>
                    <p:outputLabel value="Дата прививки от дифтерии:" styleClass="base_form_caption_text"
                                   validator="#{clientshelter.validateVaccinationDateFormat}"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="diftDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.dipthVac}" id="diftDateCal"
                                showOn="button" pattern="dd.MM.yyyy" styleClass="base_form_value_text"/>
                </p:row>
                <p:row>
                    <p:outputLabel value="Дата прививки от гепатита:" styleClass="base_form_caption_text"
                                   validator="#{clientshelter.validateVaccinationDateFormat}"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="hepDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.hepotitsVac}" id="hepDateCal"
                                showOn="button" pattern="dd.MM.yyyy" styleClass="base_form_value_text"/>
                </p:row>
                <p:row>
                    <p:outputLabel value="Дата прививки от тифа:" styleClass="base_form_caption_text"
                                   validator="#{clientshelter.validateVaccinationDateFormat}"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="typhDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.typhVac}" id="typhDateCal"
                                showOn="button" pattern="dd.MM.yyyy" styleClass="base_form_value_text"/>
                </p:row>

                <p:row>
                    <p:outputLabel value="Статус:" styleClass="base_form_caption_text"/>
                </p:row>
                <p:row>
                    <p:selectOneMenu converter="shelterResultConverter"  id="shelterStatus" value="#{clientshelter.selectedShelter.shelterresult}" style="width:185px;" styleClass="base_form_value_text">
                        <f:selectItems value="#{clientshelter.shelterResultList}" var="shelterStatus" itemLabel="#{shelterStatus.caption}" itemValue="#{shelterStatus}" />
                    </p:selectOneMenu>
                </p:row>




            </h:panelGrid>
            <p:separator />
            <p:panel>
            <p:growl id="editshelter_growl" showDetail="true" life="3000" />
            <center>
                <p:commandButton value="Добавить данные о проживании" id="updateShelterButton"
                                 update="@this editshelter_growl" ajax="true"
                                 actionListener="#{clientshelter.addNewShelterData()}"  icon="ui-icon-disk" oncomplete="addShelterWv.hide()" />

            </center>
            </p:panel>
    </h:form>
    </p:dialog>



</ui:composition>
</html>