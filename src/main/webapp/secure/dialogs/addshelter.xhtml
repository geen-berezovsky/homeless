<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">
<ui:composition>
    <p:dialog id="addShelter" header="Добавьте информацию о проживании" widgetVar="addShelterWv" resizable="false"
              closable="true" modal="true" showEffect="fade"
              hideEffect="explode" dynamic="true" closeOnEscape="true" onShow="shelterOnShow()">
        <h:form id="add_shelter">
            <p:messages/>

            <h:panelGrid columns="2" id="add_shelters_panel_grid">
                <p:row>
                    <p:outputLabel value="Клиент:" style="font-weight: bold"/>
                </p:row>
                <p:row>
                    <p:outputLabel
                            value="#{clientform.surname} #{clientform.firstname} #{clientform.middlename}"/>
                </p:row>
                <p:row>
                    <p:outputLabel value="Дата заселения:" style="font-weight: bold"
                                   validator="#{clientcontracts.validateStartDateFormat}" required="true"
                                   requiredMessage="Обязательно к заполнению"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="startNewShelterDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.inShelter}"
                                id="startNewShelterDateCal" showOn="button" pattern="dd.MM.yyyy"/>
                </p:row>

                <p:row>
                    <p:outputLabel value="Дата выселения:" style="font-weight: bold"
                                   validator="#{clientshelter.validateStopDateFormat}" required="true"
                                   requiredMessage="Обязательно к заполнению"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="stopNewShelterDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.outShelter}" id="stopNewShelterDateCal"
                                showOn="button" pattern="dd.MM.yyyy"/>
                </p:row>


                <p:row>
                    <p:outputLabel value="Комната:" style="font-weight: bold"/>
                </p:row>
                <p:row>
                    <p:selectOneRadio id="shRoomId" value="#{clientshelter.selectedShelter.roomId}"
                                      layout="pageDirection">
                        <f:selectItems itemLabel="#{roomVal.roomnumber}  (занято #{roomVal.currentnumoflivers} из #{roomVal.roommaxlivers})"
                                value="#{clientshelter.rooms}" var="roomVal" itemValue="#{roomVal.id}"/>
                    </p:selectOneRadio>
                </p:row>

                <p:row>
                    <p:outputLabel value="Дата проведения флюорографии:" style="font-weight: bold"
                                   validator="#{clientshelter.validateVaccinationDateFormat}"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="fluDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.fluorogr}" id="fluDateCal"
                                showOn="button" pattern="dd.MM.yyyy"/>
                </p:row>
                <p:row>
                    <p:outputLabel value="Дата прививки от дифтерии:" style="font-weight: bold"
                                   validator="#{clientshelter.validateVaccinationDateFormat}"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="diftDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.dipthVac}" id="diftDateCal"
                                showOn="button" pattern="dd.MM.yyyy"/>
                </p:row>
                <p:row>
                    <p:outputLabel value="Дата прививки от гепатита:" style="font-weight: bold"
                                   validator="#{clientshelter.validateVaccinationDateFormat}"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="hepDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.hepotitsVac}" id="hepDateCal"
                                showOn="button" pattern="dd.MM.yyyy"/>
                </p:row>
                <p:row>
                    <p:outputLabel value="Дата прививки от тифа:" style="font-weight: bold"
                                   validator="#{clientshelter.validateVaccinationDateFormat}"/>
                </p:row>
                <p:row>
                    <p:message display="tooltip" for="typhDateCal"/>
                    <p:calendar value="#{clientshelter.selectedShelter.typhVac}" id="typhDateCal"
                                showOn="button" pattern="dd.MM.yyyy"/>
                </p:row>

                <p:row>
                    <h:outputText value="Статус:" />
                </p:row>
                <p:row>
                    <p:selectOneMenu id="shelterStatus" value="#{clientshelter.shelterStatus(clientshelter.selectedShelter.shelterresult)}" style="width:150px;">
                        <f:selectItems value="#{clientshelter.shelterResultList}" var="shelterStatus" itemValue="#{shelterStatus}" />
                    </p:selectOneMenu>
                </p:row>




            </h:panelGrid>
            <p:separator/>
            <center>
                <p:commandButton value="Добавить данные о проживании"
                                 update="@this :m_tabview:shelter_form"
                                 actionListener="#{clientshelter.addNewShelterData()}"/>
            </center>
        </h:form>
    </p:dialog>


</ui:composition>
</html>